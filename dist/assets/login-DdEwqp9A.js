import"./style-B1I-Pwiw.js";import{A as s,T as l,E as r}from"./common-Cq3v0gx4.js";const c="http://localhost:4173/Spotify-clone",d="123d647daf9846d5a0186eb4e42f89e2",w="user-top-read user-follow-read playlist-read user-library-read",p="http://localhost:4173/Spotify-clone/login/login.html",h=()=>{const e=`https://accounts.spotify.com/authorize?client_id=${d}&response_type=token&redirect_uri=${p}&scope=${w}&show_dialog=true`;window.open(e,"login","width=800,height=600")};window.setItemsInLocalStorage=({accessToken:e,tokenType:t,expiresIn:o})=>{localStorage.setItem(s,e),localStorage.setItem(l,t),localStorage.setItem(r,Date.now()+o*1e3),window.location.href=c};document.addEventListener("DOMContentLoaded",()=>{document.getElementById("login-to-spotify").addEventListener("click",h)});window.addEventListener("load",()=>{if(localStorage.getItem(s)&&(window.location.href=`${c}/dashboard/dashboard.html`),window.opener&&!window.opener.closed){window.focus(),window.location.href.includes("error")||window.close();const{hash:t}=window.location,o=new URLSearchParams(t);console.log(o);const n=o.get("#access_token"),a=o.get("token_type"),i=o.get("expires_in");n?(window.close(),window.opener.setItemsInLocalStorage({accessToken:n,tokenType:a,expiresIn:i})):window.close()}});
